package com.znlover.exmaple;

import com.sun.org.apache.xml.internal.security.exceptions.Base64DecodingException;
import com.sun.org.apache.xml.internal.security.utils.Base64;

import java.io.*;

/**
 * Created by znlover on 10/23/2017.
 */
public class SerailizedTest{

    public static void main(String args[]) throws Exception{
        Long expired = (long)7 * 24 * 60 * 60 * 1000;
        //Session s0 = new Session("znlover:627CF9648D67FD65B0DAAB", expired);  //模拟Session 对象
        Session s0 = new Session("calc.exe", expired);  //模拟Session 对象

        //step 1 ：模拟 session 持久化到磁盘文件
        FileOutputStream fos = new FileOutputStream("session.bin");
        ObjectOutputStream os = new ObjectOutputStream(fos);
        os.writeObject(s0); // 对象序列化
        os.close();

        //step 2 : 模拟 session 对象从磁盘加载
        FileInputStream fis = new FileInputStream("session.bin");
        ObjectInputStream ois = new ObjectInputStream(fis);
        Session s0c = (Session)ois.readObject();   //对象反序列化
        ois.close();
        System.out.println(s0c.getSessionId() + " : " + s0c.getExpired());
    }
}

